<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html"
      lang="eng">
<head th:insert="partials/header :: head"/>
<link rel="stylesheet" th:href="@{/css/menu.css}">
<body>
<div class="page-container">
    <div th:replace="partials/navbar :: navbar"/>
    <div class="content-wrap">

        <div class="menu-header">
            <h1>OUR MENU</h1>
        </div>

        <div class="menu-container" id="menu-container">
            <div id="menu-nav">
                <div class="menu-categories">
                    <p><a class="menu-category-title" href="#appetizers">APPETIZERS</a></p>
                    <p><a class="menu-category-title" href="#entrees">ENTREES</a></p>
                    <p><a class="menu-category-title" href="#sides">SIDES</a></p>
                    <p><a class="menu-category-title" href="#salsas">SALSAS</a></p>
                    <p><a class="menu-category-title" href="#beverages">BEVERAGES</a></p>
                </div>
            </div>

            <!-- APPETIZERS -> CHIPS -->
            <div class="main-category">
                <p class="mainCategory" id="appetizers">Appetizers</p>
            </div>
            <p class="subCategory">Chips</p>
            <div class="menu">
                <div th:each="item : ${menuItems}"
                     th:if="${item.mainCategory.name() =='APPETIZERS' && item.subCategory.name() == 'CHIPS'}">
                    <div class="menu-item">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <p class="menu-item-description" th:text="${item.description}"></p>
                            <a class="view-more-link" th:attr="href=${'/view-more/' + item.id}">View More</a>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- APPETIZERS -> OTHER -->
            <p class="subCategory">Other</p>
            <div class="menu">
                <div th:each="item : ${menuItems}"
                     th:if="${item.mainCategory.name() =='APPETIZERS' && item.subCategory.name() == 'OTHER'}">
                    <div class="menu-item">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <p class="menu-item-description" th:text="${item.description}"></p>
                            <a class="view-more-link" th:attr="href=${'/view-more/' + item.id}">View More</a>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ENTREES -->
            <div class="main-category">
                <p class="mainCategory" id="entrees">Entrees</p>
            </div>
            <div class="menu">
                <div th:each="item : ${menuItems}" th:if="${item.mainCategory.name() == 'ENTREES'}">
                    <div class="menu-item">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <p class="menu-item-description" th:text="${item.description}"></p>
                            <a class="view-more-link" th:attr="href=${'/view-more/' + item.id}">View More</a>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- SIDES -->
            <div class="main-category">
                <p class="mainCategory" id="sides">Sides</p>
            </div>
            <div class="menu">
                <div th:each="item : ${menuItems}" th:if="${item.mainCategory.name() =='SIDES'}">
                    <div class="menu-item">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <p class="menu-item-description" th:text="${item.description}"></p>
                            <a class="view-more-link" th:attr="href=${'/view-more/' + item.id}">View More</a>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SALSAS -->
            <div class="main-category">
                <p class="mainCategory" id="salsas">Salsas</p>
            </div>
            <div class="menu-sm">
                <div th:each="item : ${menuItems}" th:if="${item.mainCategory.name() =='SALSAS'}">
                    <div class="menu-item-sm">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info-salsas">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BEVERAGES -> SODAS -->
            <div class="main-category">
                <p class="mainCategory" id="beverages">Beverages</p>
            </div>
            <p class="subCategory">Sodas</p>
            <div class="menu-sm">
                <div th:each="item : ${menuItems}"
                     th:if="${item.mainCategory.name() =='BEVERAGES' && item.subCategory.name() == 'SODAS'}">
                    <div class="menu-item-sm">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info-salsas">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--  BEVERAGES -> AGUA FRESCAS -->
            <p class="subCategory">Aguas Frescas</p>
            <div class="menu-sm">
                <div th:each="item : ${menuItems}"
                     th:if="${item.mainCategory.name() =='BEVERAGES' && item.subCategory.name() == 'AGUAFRESCAS'}">
                    <div class="menu-item-sm">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info-salsas">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--  BEVERAGES -> COFFEE -->
            <p class="subCategory">Coffee</p>
            <div class="menu-sm">
                <div th:each="item : ${menuItems}"
                     th:if="${item.mainCategory.name() =='BEVERAGES' && item.subCategory.name() == 'COFFEE'}">
                    <div class="menu-item-sm">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info-salsas">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--  BEVERAGES -> OTHER -->
            <p class="subCategory">Other</p>
            <div class="menu-sm">
                <div th:each="item : ${menuItems}"
                     th:if="${item.mainCategory.name() =='BEVERAGES' && item.subCategory.name() == 'OTHER'}">
                    <div class="menu-item-sm">
                        <div class="img-div">
                            <img class="menu-item-image" src="/img/placeholder.png">
                        </div>
                        <div class="menu-item-info-salsas">
                            <div class="menu-item-title">
                                <p th:text="${item.item_name}"></p>
                                <p><span>$</span><span th:text="${item.price}"></span></p>
                            </div>
                            <div class="add-div">
                                <button type="button" class="menu-item-add-to-bag" data-bs-toggle="modal"
                                        th:attr="data-bs-target=${'#optionsModal' + item.id}">Add to bag
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!--Creating modals for each item -->
        <div th:each="item : ${menuItems}">
            <!-- Modal -->
            <div class="modal fade" th:attr="id=${'optionsModal' + item.id}" tabindex="-1"
                 aria-labelledby="optionsModal"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="optionsModal" th:text="${item.item_name}"></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div th:if="${item.meatReq.name() =='YES'}">
                                <h6>Chose your meat (1 choice required)</h6>
                                <div th:each="option : ${item.menuItemOptions}">
                                    <div th:if="${option.getOptionCategory().name() == 'MEAT'}">
                                        <input type="radio" th:id="${'meatOptions' + item.id}"
                                               th:attr="name=${'meatOptions' + item.id}"
                                               th:value="${option.getOption_name()}">
                                        <label th:for="${option.getOption_name()}"><span
                                                th:text="${option.getOption_name()}"></span></label><br>
                                    </div>
                                </div>
                            </div>
                            <div th:if="${item.toppingsReq.name() =='YES'}">
                                <h6>Chose your toppings</h6>
                                <div th:each="option : ${item.menuItemOptions}">
                                    <div th:if="${option.getOptionCategory().name() == 'TOPPING'}">
                                        <input type="checkbox" th:id="${'toppingOptions' + item.id}"
                                               th:attr="name=${'toppingOptions' + item.id}"
                                               th:value="${option.getOption_name()}">
                                        <label th:for="${option.getOption_name()}"><span
                                                th:text="${option.getOption_name()}"></span></label><br>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-center">
                                <!--  !!!   IMPORTANT !!! -->
                                <!--  DO NOT REMOVE, CHANGE, OR ADD THE CLASSES 'minusQuantity', 'currentQuantity', 'addQuantity', 'addToBag' AMONGST ANY ELEMENTS -->
                                <h6>Quantity:</h6>
                                <button class="minusQuantity" th:id="${'minusQuantity' + item.id}">-</button>
                                <p th:id="${'currentQuantity' + item.id}">1</p>
                                <button class="addQuantity" th:id="${'addQuantity' + item.id}">+</button>
                            </div>
                            <div th:id="${'feedback' + item.id}"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" th:id="${'addToBag' + item.id}" class="btn btn-primary addToBag">Add
                                to bag
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal to let user know item was added -->
        <div class="modal fade" id="confirmation" tabindex="-1" role="dialog" aria-labelledby="confModal"
             data-backdrop="static"
             data-keyboard="false" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="confModal">Hooray!</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Your item was successfully addded to the bag!</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="stayMenu">Keep browsing the menu</button>
                        <button type="button" class="btn btn-primary" id="goToBag">View your Bag</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="foot-div">
        <div th:insert="partials/footer :: footer"/>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/menu.js"></script>

</body>
</html>